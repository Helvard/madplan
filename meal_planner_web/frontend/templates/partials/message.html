<!-- Chat message bubble partial -->
{% if is_bot %}
<div class="flex items-start gap-3" data-session-id="{{ session_id }}">
    <div class="flex-shrink-0 w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold">
        ğŸ¤–
    </div>
    <div class="flex-1 bg-green-50 border border-green-200 rounded-lg p-4 max-w-2xl">
        <div class="prose prose-sm">
            {{ message | safe }}
        </div>
    </div>
</div>

{% if trigger_generation %}
<!-- Auto-trigger meal plan generation -->
<div 
    hx-post="/chat/generate-plan" 
    hx-trigger="load"
    hx-vals='{"session_id": "{{ session_id }}"}'
    hx-target="#chat-messages"
    hx-swap="beforeend"
>
</div>
{% endif %}

{% else %}
<div class="flex items-start gap-3 justify-end">
    <div class="flex-1 bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-2xl text-right">
        <div class="prose prose-sm">
            {{ message }}
        </div>
    </div>
    <div class="flex-shrink-0 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold">
        ğŸ‘¤
    </div>
</div>
{% endif %}